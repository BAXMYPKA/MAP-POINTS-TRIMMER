<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.4) on Tue Oct 05 14:33:11 MSK 2021 -->
<title>MultipartFilterFileService</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-10-05">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MultipartFilterFileService";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">mrbaxmypka.gmail.com.mapPointsTrimmer.services</a></div>
<h2 title="Class MultipartFilterFileService" class="title">Class MultipartFilterFileService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="MultipartMainFileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">mrbaxmypka.gmail.com.mapPointsTrimmer.services.MultipartMainFileService</a></li>
<li>
<ul class="inheritance">
<li>mrbaxmypka.gmail.com.mapPointsTrimmer.services.MultipartFilterFileService</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>@Service
public class <span class="typeNameLabel">MultipartFilterFileService</span>
extends <a href="MultipartMainFileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">MultipartMainFileService</a></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#kmlHandler">kmlHandler</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(mrbaxmypka.gmail.com.mapPointsTrimmer.services.FileService,org.springframework.context.MessageSource,mrbaxmypka.gmail.com.mapPointsTrimmer.xml.KmlHandler)">MultipartFilterFileService</a></span>&#8203;(<a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a>&nbsp;fileService,
                          org.springframework.context.MessageSource&nbsp;messageSource,
                          <a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a>&nbsp;kmlHandler)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeCharset(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">changeCharset</a></span>&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)</code></th>
<td class="colLast">
<div class="block">If UTF8 filenames encoding has thrown an exception, this method
 For RU locale:
 1) Sets primary OEM "IBM866" encoding.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkCorrectXmlFilename(java.lang.String,java.util.Locale)">checkCorrectXmlFilename</a></span>&#8203;(java.lang.String&nbsp;xmlFilename,
                       java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkCorrectZipFilename(java.lang.String,java.util.Locale)">checkCorrectZipFilename</a></span>&#8203;(java.lang.String&nbsp;zipFilename,
                       java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkNullEmptyFilename(java.lang.String,java.util.Locale)">checkNullEmptyFilename</a></span>&#8203;(java.lang.String&nbsp;filename,
                      java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">createTempZip</a></span>&#8203;(java.lang.String&nbsp;processedXml,
             <a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
             java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">
<div class="block">https://stackoverflow.com/a/43836969/11592202
 Relocates all the internal files from a given .kmz or .gpz from a User to the temp directory as a new kmz
 with replacing an old inner .kml or .gpx with the new one.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#filterTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">filterTempZip</a></span>&#8203;(java.lang.String&nbsp;processedXml,
             <a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)</code></th>
<td class="colLast">
<div class="block">Extracts files from the user's archive, filters them and writes into a new temporary zip in the temp file.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private java.io.InputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getXmlFromKmz(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">getXmlFromKmz</a></span>&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
             java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">
<div class="block">1) Looks through all the .kmz
 2) Searches for .xml (.kml) file inside the given .zip (.kml) to return it in the end
 3) Adds all found images files to the instant cache in <code>MultipartMainDto#getImagesNamesFromZip()</code></div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getZipFilename(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">getZipFilename</a></span>&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)</code></th>
<td class="colLast">
<div class="block">As some old versions of Edge browser (at least Microsoft EdgeHTML 17 +) attach <code>MultipartFile.getOriginalFilename()</code>
 as the full path to the file (e.g.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processKmz(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">processKmz</a></span>&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
          java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processMultipartFilterDto(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">processMultipartFilterDto</a></span>&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processTxt(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">processTxt</a></span>&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
          java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processXml(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">processXml</a></span>&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
          java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#throwZipFilenamesEncodingException(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">throwZipFilenamesEncodingException</a></span>&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.mrbaxmypka.gmail.com.mapPointsTrimmer.services.MultipartMainFileService">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;mrbaxmypka.gmail.com.mapPointsTrimmer.services.<a href="MultipartMainFileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">MultipartMainFileService</a></h3>
<code><a href="MultipartMainFileService.html#addImageNameFromZip(java.util.zip.ZipEntry,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">addImageNameFromZip</a>, <a href="MultipartMainFileService.html#deleteTempFile(java.lang.String)">deleteTempFile</a>, <a href="MultipartMainFileService.html#deleteTempFiles()">deleteTempFiles</a>, <a href="MultipartMainFileService.html#processMultipartMainDto(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">processMultipartMainDto</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="kmlHandler">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>kmlHandler</h4>
<pre>private final&nbsp;<a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a> kmlHandler</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(mrbaxmypka.gmail.com.mapPointsTrimmer.services.FileService,org.springframework.context.MessageSource,mrbaxmypka.gmail.com.mapPointsTrimmer.xml.KmlHandler)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MultipartFilterFileService</h4>
<pre>@Autowired
public&nbsp;MultipartFilterFileService&#8203;(<a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a>&nbsp;fileService,
                                  org.springframework.context.MessageSource&nbsp;messageSource,
                                  <a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a>&nbsp;kmlHandler)</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="processMultipartFilterDto(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processMultipartFilterDto</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path&nbsp;processMultipartFilterDto&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)
                                             throws java.io.IOException,
                                                    javax.xml.parsers.ParserConfigurationException,
                                                    org.xml.sax.SAXException,
                                                    javax.xml.transform.TransformerException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.xml.parsers.ParserConfigurationException</code></dd>
<dd><code>org.xml.sax.SAXException</code></dd>
<dd><code>javax.xml.transform.TransformerException</code></dd>
</dl>
</li>
</ul>
<a id="processXml(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processXml</h4>
<pre class="methodSignature">private&nbsp;java.nio.file.Path&nbsp;processXml&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
                                      java.util.Locale&nbsp;locale)
                               throws java.io.IOException,
                                      javax.xml.parsers.ParserConfigurationException,
                                      org.xml.sax.SAXException,
                                      javax.xml.transform.TransformerException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.xml.parsers.ParserConfigurationException</code></dd>
<dd><code>org.xml.sax.SAXException</code></dd>
<dd><code>javax.xml.transform.TransformerException</code></dd>
</dl>
</li>
</ul>
<a id="processKmz(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processKmz</h4>
<pre class="methodSignature">private&nbsp;java.nio.file.Path&nbsp;processKmz&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
                                      java.util.Locale&nbsp;locale)
                               throws java.io.IOException,
                                      javax.xml.parsers.ParserConfigurationException,
                                      org.xml.sax.SAXException,
                                      javax.xml.transform.TransformerException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.xml.parsers.ParserConfigurationException</code></dd>
<dd><code>org.xml.sax.SAXException</code></dd>
<dd><code>javax.xml.transform.TransformerException</code></dd>
</dl>
</li>
</ul>
<a id="processTxt(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processTxt</h4>
<pre class="methodSignature">private&nbsp;java.nio.file.Path&nbsp;processTxt&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
                                      java.util.Locale&nbsp;locale)
                               throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="checkCorrectZipFilename(java.lang.String,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkCorrectZipFilename</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;checkCorrectZipFilename&#8203;(java.lang.String&nbsp;zipFilename,
                                     java.util.Locale&nbsp;locale)
                              throws java.lang.IllegalArgumentException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code></dd>
</dl>
</li>
</ul>
<a id="checkCorrectXmlFilename(java.lang.String,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkCorrectXmlFilename</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;checkCorrectXmlFilename&#8203;(java.lang.String&nbsp;xmlFilename,
                                     java.util.Locale&nbsp;locale)</pre>
</li>
</ul>
<a id="checkNullEmptyFilename(java.lang.String,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkNullEmptyFilename</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;checkNullEmptyFilename&#8203;(java.lang.String&nbsp;filename,
                                    java.util.Locale&nbsp;locale)
                             throws java.lang.IllegalArgumentException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code></dd>
</dl>
</li>
</ul>
<a id="createTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTempZip</h4>
<pre class="methodSignature">private&nbsp;java.nio.file.Path&nbsp;createTempZip&#8203;(java.lang.String&nbsp;processedXml,
                                         <a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
                                         java.util.Locale&nbsp;locale)
                                  throws java.io.IOException</pre>
<div class="block">https://stackoverflow.com/a/43836969/11592202
 Relocates all the internal files from a given .kmz or .gpz from a User to the temp directory as a new kmz
 with replacing an old inner .kml or .gpx with the new one.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>processedXml</code> - A processed xml String to be written to the resulting file.</dd>
<dd><code>multipartFilterDto</code> - </dd>
<dd><code>locale</code> - To return a locale-oriented messages</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>Path</code> to a temp archive file with photos to be returned to a User.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - With the localized message to be returned to a User if the temp file writing is failed.</dd>
</dl>
</li>
</ul>
<a id="filterTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterTempZip</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;filterTempZip&#8203;(java.lang.String&nbsp;processedXml,
                           <a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)
                    throws java.io.IOException</pre>
<div class="block">Extracts files from the user's archive, filters them and writes into a new temporary zip in the temp file.
 If no special encoding for filename given tries to use universal UTF8.
 When a <code>ZipInputStream</code> throws <code>MalformedInputException</code> or <code>IllegalArgumentException</code> it tries to
 change the filenames encoding in the <a href="#changeCharset(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)"><code>changeCharset(MultipartFilterDto)</code></a> method.
 If no luck rethrows an <code>IllegalArgumentException</code> with the message to a user about filenames encoding info.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>processedXml</code> - </dd>
<dd><code>multipartFilterDto</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If something wrong while reading a zip archive.</dd>
</dl>
</li>
</ul>
<a id="changeCharset(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeCharset</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;changeCharset&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)</pre>
<div class="block">If UTF8 filenames encoding has thrown an exception, this method
 For RU locale:
 1) Sets primary OEM "IBM866" encoding.
 2) Then tries to use "Windows-1251" encoding if no luck.
 3) Throws an exception with a message for a user if no luck.
 For EN locale:
 1) Sets primary "ISO-8859-1"
 2) Throws an exception with a message to a user if no luck.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartFilterDto</code> - The inner parameter <a href="../entitiesDto/MultipartFilterDto.html#setCharset(java.nio.charset.Charset)"><code>MultipartFilterDto.setCharset(Charset)</code></a> has to be set
                           in the <a href="#filterTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)"><code>filterTempZip(String, MultipartFilterDto)</code></a> method.</dd>
</dl>
</li>
</ul>
<a id="throwZipFilenamesEncodingException(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>throwZipFilenamesEncodingException</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;throwZipFilenamesEncodingException&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)</pre>
</li>
</ul>
<a id="getZipFilename(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getZipFilename</h4>
<pre class="methodSignature">private&nbsp;java.lang.String&nbsp;getZipFilename&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto)</pre>
<div class="block">As some old versions of Edge browser (at least Microsoft EdgeHTML 17 +) attach <code>MultipartFile.getOriginalFilename()</code>
 as the full path to the file (e.g. "C:\temp\Points.kmz" instead of just "Points.kmz"), getting just the filename
 is a bit more complicated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartFilterDto</code> - A filename to be extracted from.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The corrected filename of a .zip(.kmz) archive from a given <a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto"><code>MultipartMainDto</code></a></dd>
</dl>
</li>
</ul>
<a id="getXmlFromKmz(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFilterDto,java.util.Locale)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getXmlFromKmz</h4>
<pre class="methodSignature">private&nbsp;java.io.InputStream&nbsp;getXmlFromKmz&#8203;(<a href="../entitiesDto/MultipartFilterDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFilterDto</a>&nbsp;multipartFilterDto,
                                          java.util.Locale&nbsp;locale)
                                   throws java.io.IOException</pre>
<div class="block">1) Looks through all the .kmz
 2) Searches for .xml (.kml) file inside the given .zip (.kml) to return it in the end
 3) Adds all found images files to the instant cache in <code>MultipartMainDto#getImagesNamesFromZip()</code></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartFilterDto</code> - Which contains .gpz, .kmz or any other ZIP archives</dd>
<dd><code>locale</code> - To send a localized error messages.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>InputStream</code> from the file with the given file extension (.kml as usual).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If something wrong with the given .zip file</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
