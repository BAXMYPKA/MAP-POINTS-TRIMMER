<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="ru">
<head>
<!-- Generated by javadoc (11.0.2) on Sat Sep 04 21:23:18 MSK 2021 -->
<title>MultipartFileService</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-09-04">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MultipartFileService";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">mrbaxmypka.gmail.com.mapPointsTrimmer.services</a></div>
<h2 title="Class MultipartFileService" class="title">Class MultipartFileService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>mrbaxmypka.gmail.com.mapPointsTrimmer.services.MultipartMainFileService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>@Service
public class <span class="typeNameLabel">MultipartFileService</span>
extends java.lang.Object</pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Locale</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_LOCALE">DEFAULT_LOCALE</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fileService">fileService</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#kmlHandler">kmlHandler</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.springframework.context.MessageSource</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#messageSource">messageSource</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#PICTOGRAMS_FULL_PATH_PREFIX">PICTOGRAMS_FULL_PATH_PREFIX</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#TEMP_DIR">TEMP_DIR</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Map&lt;<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>,&#8203;<a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFileDto</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tempFiles">tempFiles</a></span></code></th>
<td class="colLast">
<div class="block">The temp file which is stores a <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto"><code>MultipartDto</code></a> as a key for an according <a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto"><code>MultipartFileDto</code></a>
 with the appropriate system temp directory, a xml filename and a zip filename.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(mrbaxmypka.gmail.com.mapPointsTrimmer.xml.KmlHandler,mrbaxmypka.gmail.com.mapPointsTrimmer.services.FileService,org.springframework.context.MessageSource)">MultipartFileService</a></span>&#8203;(<a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a>&nbsp;kmlHandler,
                    <a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a>&nbsp;fileService,
                    org.springframework.context.MessageSource&nbsp;messageSource)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addImageNameFromZip(java.util.zip.ZipEntry,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">addImageNameFromZip</a></span>&#8203;(java.util.zip.ZipEntry&nbsp;zipEntry,
                   <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createNewZip(java.util.zip.ZipOutputStream,java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,java.nio.file.Path)">createNewZip</a></span>&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
            java.lang.String&nbsp;processedXml,
            <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
            java.nio.file.Path&nbsp;tempFile)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteTempFile(java.lang.String)">deleteTempFile</a></span>&#8203;(java.lang.String&nbsp;sessionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteTempFiles()">deleteTempFiles</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private java.io.InputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getXmlFromZip(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFileDto,mrbaxmypka.gmail.com.mapPointsTrimmer.utils.DownloadAs,java.util.Locale)">getXmlFromZip</a></span>&#8203;(<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
             <a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFileDto</a>&nbsp;multipartMainFileDto,
             <a href="../utils/DownloadAs.html" title="enum in mrbaxmypka.gmail.com.mapPointsTrimmer.utils">DownloadAs</a>&nbsp;xmlFileExtension,
             java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">
<div class="block">1) Looks through all the .zip(.kmz)
 2) Searches for .xml (.kml) file inside the given .zip (.kml) to return it in the end
 3) Adds all found images files to the instant cache in <code>MultipartDto#getImagesNamesFromZip()</code></div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getZipFilename(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">getZipFilename</a></span>&#8203;(<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto)</code></th>
<td class="colLast">
<div class="block">As some old versions of Edge browser (at least Microsoft EdgeHTML 17 +) attach <code>MultipartFile.getOriginalFilename()</code>
 as the full path to the file (e.g.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processExistingZip(java.util.zip.ZipOutputStream,java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,java.nio.file.Path)">processExistingZip</a></span>&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
                  java.lang.String&nbsp;processedXml,
                  <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
                  java.nio.file.Path&nbsp;tempFile)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processMultipartDto(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,java.util.Locale)">processMultipartDto</a></span>&#8203;(<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
                   java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFileDto,java.util.Locale)">processTempZip</a></span>&#8203;(java.lang.String&nbsp;processedXml,
              <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
              <a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFileDto</a>&nbsp;multipartMainFileDto,
              java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">
<div class="block">https://stackoverflow.com/a/43836969/11592202
 Relocates all the internal files from a given .kmz or .gpz from a User to the temp directory as a new kmz
 with replacing an old inner .kml or .gpx with the new one.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeDownloadedGoogleIcons(java.util.zip.ZipOutputStream,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">writeDownloadedGoogleIcons</a></span>&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
                          <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeLocusPictogram(java.util.zip.ZipOutputStream,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">writeLocusPictogram</a></span>&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
                   <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeTempFile(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFileDto,java.util.Locale)">writeTempFile</a></span>&#8203;(java.lang.String&nbsp;processedXml,
             <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
             <a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFileDto</a>&nbsp;multipartMainFileDto,
             java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="TEMP_DIR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEMP_DIR</h4>
<pre>private final&nbsp;java.lang.String TEMP_DIR</pre>
</li>
</ul>
<a id="DEFAULT_LOCALE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_LOCALE</h4>
<pre>private final&nbsp;java.util.Locale DEFAULT_LOCALE</pre>
</li>
</ul>
<a id="PICTOGRAMS_FULL_PATH_PREFIX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PICTOGRAMS_FULL_PATH_PREFIX</h4>
<pre>private final&nbsp;java.lang.String PICTOGRAMS_FULL_PATH_PREFIX</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#mrbaxmypka.gmail.com.mapPointsTrimmer.services.MultipartFileService.PICTOGRAMS_FULL_PATH_PREFIX">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="messageSource">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messageSource</h4>
<pre>private final&nbsp;org.springframework.context.MessageSource messageSource</pre>
</li>
</ul>
<a id="kmlHandler">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>kmlHandler</h4>
<pre>private final&nbsp;<a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a> kmlHandler</pre>
</li>
</ul>
<a id="fileService">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileService</h4>
<pre>private final&nbsp;<a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a> fileService</pre>
</li>
</ul>
<a id="tempFiles">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>tempFiles</h4>
<pre>private final&nbsp;java.util.Map&lt;<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>,&#8203;<a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFileDto</a>&gt; tempFiles</pre>
<div class="block">The temp file which is stores a <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto"><code>MultipartDto</code></a> as a key for an according <a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto"><code>MultipartFileDto</code></a>
 with the appropriate system temp directory, a xml filename and a zip filename.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(mrbaxmypka.gmail.com.mapPointsTrimmer.xml.KmlHandler,mrbaxmypka.gmail.com.mapPointsTrimmer.services.FileService,org.springframework.context.MessageSource)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MultipartFileService</h4>
<pre>@Autowired
public&nbsp;MultipartFileService&#8203;(<a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a>&nbsp;kmlHandler,
                            <a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a>&nbsp;fileService,
                            org.springframework.context.MessageSource&nbsp;messageSource)</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="processMultipartDto(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processMultipartDto</h4>
<pre class="methodSignature">public&nbsp;java.nio.file.Path&nbsp;processMultipartDto&#8203;(@NonNull
                                              <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
                                              @Nullable
                                              java.util.Locale&nbsp;locale)
                                       throws java.io.IOException,
                                              javax.xml.parsers.ParserConfigurationException,
                                              org.xml.sax.SAXException,
                                              javax.xml.transform.TransformerException,
                                              java.lang.InterruptedException</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartMainDto</code> - </dd>
<dd><code>locale</code> - To localize possible messages for User. If null, English will be userd.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The resulting <code>Path</code> in a temp directory with the processed file for a User.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - To be treated in an ExceptionHandler method or ControllerAdvice level</dd>
<dd><code>javax.xml.parsers.ParserConfigurationException</code></dd>
<dd><code>org.xml.sax.SAXException</code></dd>
<dd><code>javax.xml.transform.TransformerException</code></dd>
<dd><code>java.lang.InterruptedException</code></dd>
</dl>
</li>
</ul>
<a id="getXmlFromZip(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFileDto,mrbaxmypka.gmail.com.mapPointsTrimmer.utils.DownloadAs,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getXmlFromZip</h4>
<pre class="methodSignature">private&nbsp;java.io.InputStream&nbsp;getXmlFromZip&#8203;(<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
                                          <a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFileDto</a>&nbsp;multipartMainFileDto,
                                          <a href="../utils/DownloadAs.html" title="enum in mrbaxmypka.gmail.com.mapPointsTrimmer.utils">DownloadAs</a>&nbsp;xmlFileExtension,
                                          java.util.Locale&nbsp;locale)
                                   throws java.io.IOException</pre>
<div class="block">1) Looks through all the .zip(.kmz)
 2) Searches for .xml (.kml) file inside the given .zip (.kml) to return it in the end
 3) Adds all found images files to the instant cache in <code>MultipartDto#getImagesNamesFromZip()</code></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartMainDto</code> - Which contains .gpz, .kmz or any other ZIP archives</dd>
<dd><code>xmlFileExtension</code> - .kml, .gpx or any possible extension of the file to be extracted from the given ZIP
                         archive as it must be a single one inside.</dd>
<dd><code>locale</code> - To send a localized error messages.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>InputStream</code> from the file with the given file extension (.kml as usual).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If something wrong with the given .zip file</dd>
</dl>
</li>
</ul>
<a id="addImageNameFromZip(java.util.zip.ZipEntry,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addImageNameFromZip</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;addImageNameFromZip&#8203;(java.util.zip.ZipEntry&nbsp;zipEntry,
                                 <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto)</pre>
</li>
</ul>
<a id="processTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFileDto,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processTempZip</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;processTempZip&#8203;(java.lang.String&nbsp;processedXml,
                            <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
                            <a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFileDto</a>&nbsp;multipartMainFileDto,
                            java.util.Locale&nbsp;locale)
                     throws java.io.IOException</pre>
<div class="block">https://stackoverflow.com/a/43836969/11592202
 Relocates all the internal files from a given .kmz or .gpz from a User to the temp directory as a new kmz
 with replacing an old inner .kml or .gpx with the new one.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>processedXml</code> - A processed xml String to be written to the resulting file.</dd>
<dd><code>multipartMainDto</code> - </dd>
<dd><code>locale</code> - To return a locale-oriented messages</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - With the localized message to be returned to a User if the temp file writing is failed.</dd>
</dl>
</li>
</ul>
<a id="writeDownloadedGoogleIcons(java.util.zip.ZipOutputStream,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeDownloadedGoogleIcons</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;writeDownloadedGoogleIcons&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
                                        <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto)
                                 throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="writeLocusPictogram(java.util.zip.ZipOutputStream,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeLocusPictogram</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;writeLocusPictogram&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
                                 <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto)
                          throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="processExistingZip(java.util.zip.ZipOutputStream,java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,java.nio.file.Path)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processExistingZip</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;processExistingZip&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
                                java.lang.String&nbsp;processedXml,
                                <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
                                java.nio.file.Path&nbsp;tempFile)
                         throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="createNewZip(java.util.zip.ZipOutputStream,java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,java.nio.file.Path)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNewZip</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;createNewZip&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
                          java.lang.String&nbsp;processedXml,
                          <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
                          java.nio.file.Path&nbsp;tempFile)
                   throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="getZipFilename(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getZipFilename</h4>
<pre class="methodSignature">private&nbsp;java.lang.String&nbsp;getZipFilename&#8203;(<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto)</pre>
<div class="block">As some old versions of Edge browser (at least Microsoft EdgeHTML 17 +) attach <code>MultipartFile.getOriginalFilename()</code>
 as the full path to the file (e.g. "C:\temp\Points.kmz" instead of just "Points.kmz"), getting just the filename
 is a bit more complicated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartMainDto</code> - A filename to be extracted from.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The filename of a .zip(.kmz) archive from a given <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto"><code>MultipartDto</code></a></dd>
</dl>
</li>
</ul>
<a id="writeTempFile(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartFileDto,java.util.Locale)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeTempFile</h4>
<pre class="methodSignature">private&nbsp;java.nio.file.Path&nbsp;writeTempFile&#8203;(java.lang.String&nbsp;processedXml,
                                         <a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartMainDto,
                                         <a href="../entitiesDto/MultipartFileDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartFileDto</a>&nbsp;multipartMainFileDto,
                                         java.util.Locale&nbsp;locale)
                                  throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="deleteTempFiles()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteTempFiles</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteTempFiles()</pre>
</li>
</ul>
<a id="deleteTempFile(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>deleteTempFile</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteTempFile&#8203;(java.lang.String&nbsp;sessionId)</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
