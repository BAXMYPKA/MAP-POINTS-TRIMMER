<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="ru">
<head>
<!-- Generated by javadoc (14.0.1) on Fri Oct 08 11:52:53 MSK 2021 -->
<title>MultipartMainFileService</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-10-08">
<meta name="description" content="declaration: package: mrbaxmypka.gmail.com.mapPointsTrimmer.services, class: MultipartMainFileService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">mrbaxmypka.gmail.com.mapPointsTrimmer.services</a></div>
<h1 title="Class MultipartMainFileService" class="title">Class MultipartMainFileService</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">mrbaxmypka.gmail.com.mapPointsTrimmer.services.MultipartMainFileService</div>
</div>
<section class="description">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="MultipartFilterFileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">MultipartFilterFileService</a></code></dd>
</dl>
<hr>
<pre>@Service
public class <span class="typeNameLabel">MultipartMainFileService</span>
extends java.lang.Object</pre>
</section>
<section class="summary">
<ul class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Locale</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_LOCALE">DEFAULT_LOCALE</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fileService">fileService</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#kmlHandler">kmlHandler</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.springframework.context.MessageSource</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#messageSource">messageSource</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#PICTOGRAMS_FULL_PATH_PREFIX">PICTOGRAMS_FULL_PATH_PREFIX</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#TEMP_DIR">TEMP_DIR</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Set&lt;<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tempFiles">tempFiles</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(mrbaxmypka.gmail.com.mapPointsTrimmer.xml.KmlHandler,mrbaxmypka.gmail.com.mapPointsTrimmer.services.FileService,org.springframework.context.MessageSource)">MultipartMainFileService</a></span>&#8203;(<a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a>&nbsp;kmlHandler,
<a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a>&nbsp;fileService,
org.springframework.context.MessageSource&nbsp;messageSource)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addImageNameFromZip(java.util.zip.ZipEntry,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">addImageNameFromZip</a></span>&#8203;(java.util.zip.ZipEntry&nbsp;zipEntry,
<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createNewZip(java.util.zip.ZipOutputStream,java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,java.nio.file.Path)">createNewZip</a></span>&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
java.lang.String&nbsp;processedXml,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
java.nio.file.Path&nbsp;tempFile)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteTempFile(java.lang.String)">deleteTempFile</a></span>&#8203;(java.lang.String&nbsp;sessionId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteTempFiles()">deleteTempFiles</a></span>()</code></th>
<td class="colLast">
<div class="block">Deletes all the temp files for the end-users in the server temp directory.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>private java.io.InputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getXmlFromZip(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,mrbaxmypka.gmail.com.mapPointsTrimmer.utils.DownloadAs,java.util.Locale)">getXmlFromZip</a></span>&#8203;(<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
<a href="../utils/DownloadAs.html" title="enum in mrbaxmypka.gmail.com.mapPointsTrimmer.utils">DownloadAs</a>&nbsp;xmlFileExtension,
java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">
<div class="block">1) Looks through all the .zip(.kmz)
 2) Searches for .xml (.kml) file inside the given .zip (.kml) to return it in the end
 3) Adds all found images files to the instant cache in <code>MultipartMainDto#getImagesNamesFromZip()</code></div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getZipFilename(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">getZipFilename</a></span>&#8203;(<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto)</code></th>
<td class="colLast">
<div class="block">As some old versions of Edge browser (at least Microsoft EdgeHTML 17 +) attach <code>MultipartFile.getOriginalFilename()</code>
 as the full path to the file (e.g.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processExistingZip(java.util.zip.ZipOutputStream,java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,java.nio.file.Path)">processExistingZip</a></span>&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
java.lang.String&nbsp;processedXml,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
java.nio.file.Path&nbsp;tempFile)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processMultipartMainDto(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">processMultipartMainDto</a></span>&#8203;(<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,java.util.Locale)">processTempZip</a></span>&#8203;(java.lang.String&nbsp;processedXml,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">
<div class="block">https://stackoverflow.com/a/43836969/11592202
 Relocates all the internal files from a given .kmz or .gpz from a User to the temp directory as a new kmz
 with replacing an old inner .kml or .gpx with the new one.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeDownloadedGoogleIcons(java.util.zip.ZipOutputStream,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">writeDownloadedGoogleIcons</a></span>&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeLocusPictogram(java.util.zip.ZipOutputStream,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">writeLocusPictogram</a></span>&#8203;(java.util.zip.ZipOutputStream&nbsp;zos,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>private java.nio.file.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeTempFile(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,java.util.Locale)">writeTempFile</a></span>&#8203;(java.lang.String&nbsp;processedXml,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
java.util.Locale&nbsp;locale)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="TEMP_DIR">TEMP_DIR</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">TEMP_DIR</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="DEFAULT_LOCALE">DEFAULT_LOCALE</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.util.Locale</span>&nbsp;<span class="memberName">DEFAULT_LOCALE</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="PICTOGRAMS_FULL_PATH_PREFIX">PICTOGRAMS_FULL_PATH_PREFIX</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">PICTOGRAMS_FULL_PATH_PREFIX</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#mrbaxmypka.gmail.com.mapPointsTrimmer.services.MultipartMainFileService.PICTOGRAMS_FULL_PATH_PREFIX">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="messageSource">messageSource</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">org.springframework.context.MessageSource</span>&nbsp;<span class="memberName">messageSource</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="kmlHandler">kmlHandler</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType"><a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a></span>&nbsp;<span class="memberName">kmlHandler</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="fileService">fileService</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType"><a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a></span>&nbsp;<span class="memberName">fileService</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="tempFiles">tempFiles</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.util.Set&lt;<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&gt;</span>&nbsp;<span class="memberName">tempFiles</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(mrbaxmypka.gmail.com.mapPointsTrimmer.xml.KmlHandler,mrbaxmypka.gmail.com.mapPointsTrimmer.services.FileService,org.springframework.context.MessageSource)">MultipartMainFileService</a></h3>
<div class="memberSignature"><span class="annotations">@Autowired
</span><span class="modifiers">public</span>&nbsp;<span class="memberName">MultipartMainFileService</span>&#8203;(<span class="arguments"><a href="../xml/KmlHandler.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.xml">KmlHandler</a>&nbsp;kmlHandler,
<a href="FileService.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.services">FileService</a>&nbsp;fileService,
org.springframework.context.MessageSource&nbsp;messageSource)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="processMultipartMainDto(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">processMultipartMainDto</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.nio.file.Path</span>&nbsp;<span class="memberName">processMultipartMainDto</span>&#8203;(<span class="arguments">@NonNull
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto)</span>
                                           throws <span class="exceptions">java.io.IOException,
javax.xml.parsers.ParserConfigurationException,
org.xml.sax.SAXException,
javax.xml.transform.TransformerException,
java.lang.InterruptedException</span></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartMainDto</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The resulting <code>Path</code> in a temp directory with the processed file for a User.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - To be treated in an ExceptionHandler method or ControllerAdvice level</dd>
<dd><code>javax.xml.parsers.ParserConfigurationException</code></dd>
<dd><code>org.xml.sax.SAXException</code></dd>
<dd><code>javax.xml.transform.TransformerException</code></dd>
<dd><code>java.lang.InterruptedException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getXmlFromZip(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,mrbaxmypka.gmail.com.mapPointsTrimmer.utils.DownloadAs,java.util.Locale)">getXmlFromZip</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.io.InputStream</span>&nbsp;<span class="memberName">getXmlFromZip</span>&#8203;(<span class="arguments"><a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
<a href="../utils/DownloadAs.html" title="enum in mrbaxmypka.gmail.com.mapPointsTrimmer.utils">DownloadAs</a>&nbsp;xmlFileExtension,
java.util.Locale&nbsp;locale)</span>
                                   throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">1) Looks through all the .zip(.kmz)
 2) Searches for .xml (.kml) file inside the given .zip (.kml) to return it in the end
 3) Adds all found images files to the instant cache in <code>MultipartMainDto#getImagesNamesFromZip()</code></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartMainDto</code> - Which contains .gpz, .kmz or any other ZIP archives</dd>
<dd><code>xmlFileExtension</code> - .kml, .gpx or any possible extension of the file to be extracted from the given ZIP
                         archive as it must be a single one inside.</dd>
<dd><code>locale</code> - To send a localized error messages.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>InputStream</code> from the file with the given file extension (.kml as usual).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If something wrong with the given .zip file</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="addImageNameFromZip(java.util.zip.ZipEntry,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartDto)">addImageNameFromZip</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">addImageNameFromZip</span>&#8203;(<span class="arguments">java.util.zip.ZipEntry&nbsp;zipEntry,
<a href="../entitiesDto/MultipartDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartDto</a>&nbsp;multipartDto)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="processTempZip(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,java.util.Locale)">processTempZip</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">processTempZip</span>&#8203;(<span class="arguments">java.lang.String&nbsp;processedXml,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
java.util.Locale&nbsp;locale)</span>
                     throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">https://stackoverflow.com/a/43836969/11592202
 Relocates all the internal files from a given .kmz or .gpz from a User to the temp directory as a new kmz
 with replacing an old inner .kml or .gpx with the new one.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>processedXml</code> - A processed xml String to be written to the resulting file.</dd>
<dd><code>multipartMainDto</code> - </dd>
<dd><code>locale</code> - To return a locale-oriented messages</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - With the localized message to be returned to a User if the temp file writing is failed.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="writeDownloadedGoogleIcons(java.util.zip.ZipOutputStream,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">writeDownloadedGoogleIcons</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">writeDownloadedGoogleIcons</span>&#8203;(<span class="arguments">java.util.zip.ZipOutputStream&nbsp;zos,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto)</span>
                                 throws <span class="exceptions">java.io.IOException</span></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="writeLocusPictogram(java.util.zip.ZipOutputStream,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">writeLocusPictogram</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">writeLocusPictogram</span>&#8203;(<span class="arguments">java.util.zip.ZipOutputStream&nbsp;zos,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto)</span>
                          throws <span class="exceptions">java.io.IOException</span></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="processExistingZip(java.util.zip.ZipOutputStream,java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,java.nio.file.Path)">processExistingZip</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">processExistingZip</span>&#8203;(<span class="arguments">java.util.zip.ZipOutputStream&nbsp;zos,
java.lang.String&nbsp;processedXml,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
java.nio.file.Path&nbsp;tempFile)</span>
                         throws <span class="exceptions">java.io.IOException</span></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="createNewZip(java.util.zip.ZipOutputStream,java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,java.nio.file.Path)">createNewZip</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">createNewZip</span>&#8203;(<span class="arguments">java.util.zip.ZipOutputStream&nbsp;zos,
java.lang.String&nbsp;processedXml,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
java.nio.file.Path&nbsp;tempFile)</span>
                   throws <span class="exceptions">java.io.IOException</span></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getZipFilename(mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto)">getZipFilename</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">getZipFilename</span>&#8203;(<span class="arguments"><a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto)</span></div>
<div class="block">As some old versions of Edge browser (at least Microsoft EdgeHTML 17 +) attach <code>MultipartFile.getOriginalFilename()</code>
 as the full path to the file (e.g. "C:\temp\Points.kmz" instead of just "Points.kmz"), getting just the filename
 is a bit more complicated.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>multipartMainDto</code> - A filename to be extracted from.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The filename of a .zip(.kmz) archive from a given <a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto"><code>MultipartMainDto</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="writeTempFile(java.lang.String,mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto.MultipartMainDto,java.util.Locale)">writeTempFile</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.nio.file.Path</span>&nbsp;<span class="memberName">writeTempFile</span>&#8203;(<span class="arguments">java.lang.String&nbsp;processedXml,
<a href="../entitiesDto/MultipartMainDto.html" title="class in mrbaxmypka.gmail.com.mapPointsTrimmer.entitiesDto">MultipartMainDto</a>&nbsp;multipartMainDto,
java.util.Locale&nbsp;locale)</span>
                                  throws <span class="exceptions">java.io.IOException</span></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="deleteTempFiles()">deleteTempFiles</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">deleteTempFiles</span>()</div>
<div class="block">Deletes all the temp files for the end-users in the server temp directory.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="deleteTempFile(java.lang.String)">deleteTempFile</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">deleteTempFile</span>&#8203;(<span class="arguments">java.lang.String&nbsp;sessionId)</span></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - Deletes the specific temp file by its sessionId from the server temp directory.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
